<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DIMC.JP - Social Media Services</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <?php 
     include("favicon.html");
      ?>
  </head>
  <body>
    <div class="d-flex justify-content-center align-items-center vh-100">
      <div class="w-100 px-3">
        <h5 class="mb-3">แชร์ไปได้บุญ เพราะคุณคือกัลยาณมิตร</h5>
        <button class="btn btn-success btn-block btn-lg w-100" id="btn-share">
          กดเพื่อเลือกเพื่อน & กลุ่ม
        </button>
      </div>
    </div>
    <script
      charset="utf-8"
      src="https://static.line-scdn.net/liff/edge/2/sdk.js"
    ></script>
    <script>
      // Using a callback
      liff.init(
        { liffId: "1661018679-9E41MJJw" },
        initializeApp,
        errorCallback
      );

      // initializeApp
      function initializeApp() {
        let btnShare = document.querySelector("#btn-share");

        btnShare.addEventListener("click", function () {
          let title = "ข่าวใสๆ จากไลน์น้องบุญจัง";
          let monkName = "";
          let imgurl =
            "https://i.ibb.co/3r0tCz3/049f6028b7078911fe9b4fef77de8007.jpg";
          let sessionDate = " ";
          let linkuri = "https://dimc.jp";

          let msg = createFlexMsg(
            title,
            monkName,
            imgurl,
            sessionDate,
            linkuri
          );

          if (liff.isApiAvailable("shareTargetPicker")) {
            liff
              .shareTargetPicker([msg])
              .then(function (res) {
                if (res) {
                  console.log(`[${res.status}] Message sent!`);
                  liff.closeWindow();
                } else {
                }
              })
              .catch(function (error) {
                // something went wrong before sending a message
                console.log("something wrong happen");
              });
          } else {
            alert("กรุณาเปิดบนสมาร์ทโฟน");
          }
        });
      } // initializeApp

      // errorCallback
      function errorCallback() {
        alert("error");
      }

      // createFlexMsg
      function createFlexMsg(title, monkName, imgurl, sessionDate, linkuri) {
        return {
          type: "flex",
          altText: title,
          contents: {
            type: "bubble",
            size: "mega",
            hero: {
              type: "image",
              url: imgurl,
              size: "full",
              aspectRatio: "1:1",
              aspectMode: "cover",
            },
            body: {
              type: "box",
              layout: "vertical",
              contents: [
                {
                  type: "box",
                  layout: "horizontal",
                  contents: [
                    {
                      type: "box",
                      layout: "vertical",
                      contents: [
                        {
                          type: "image",
                          url: "https://i.ibb.co/JkfTP1p/phpx-Artfc.png",
                          size: "full",
                          aspectMode: "cover",
                        },
                      ],
                      width: "35px",
                      height: "35px",
                    },
                    {
                      type: "box",
                      layout: "vertical",
                      offsetStart: "10px",
                      contents: [
                        {
                          type: "text",
                          text: "ศูนย์ปฏิบัติธรรมแก้วเมืองเลย",
                          size: "sm",
                        },
                        {
                          type: "text",
                          text: "เชิญรับชมธรรมะพิเศษเรื่อง",
                          size: "sm",
                          margin: "sm",
                        },
                      ],
                    },
                  ],
                },

                {
                  type: "text",
                  text: title,
                  weight: "bold",
                  size: "xl",
                  margin: "lg",
                },
                {
                  type: "text",
                  text: "โดย " + monkName,
                  size: "md",
                  margin: "lg",
                },
                {
                  type: "text",
                  text: sessionDate,
                  size: "md",
                  color: "#858585",
                  margin: "sm",
                },
              ],
            },
            footer: {
              type: "box",
              layout: "vertical",
              spacing: "sm",
              contents: [
                {
                  type: "button",
                  action: {
                    type: "uri",
                    label: "เข้า ZOOM เลย",
                    uri: linkuri,
                  },
                  style: "primary",
                },
                {
                  type: "button",
                  action: {
                    type: "uri",
                    label: "กดเพื่อแชร์การ์ดนี้",
                    uri: "https://liff.line.me/1656118230-odwRvOVp",
                  },
                  margin: "md",
                },
              ],
            },
          },
        };
      }
    </script>
  </body>
</html>
